"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[9433],{51042:function(b,C,e){var i=e(1413),a=e(67294),D=e(42110),d=e(91146),T=function(M,m){return a.createElement(d.Z,(0,i.Z)((0,i.Z)({},M),{},{ref:m,icon:D.Z}))},l=a.forwardRef(T);C.Z=l},38345:function(b,C,e){var i=e(1413),a=e(53911),D=e(44962),d=e(13286),T=e(85893),l=function(m){return(0,T.jsx)(a.Z,(0,i.Z)({bodyStyle:{padding:0}},m))},c=a.Z;c.isProCard=!0,c.Divider=D.Z,c.TabPane=d.Z,c.Group=l,C.Z=c},21134:function(b,C,e){var i=e(1413),a=e(91),D=e(67294),d=e(57812),T=e(85893),l=["fieldProps","request","params","proFieldProps"],c=function(o,L){var I=o.fieldProps,R=o.request,Z=o.params,P=o.proFieldProps,u=(0,a.Z)(o,l);return(0,T.jsx)(d.Z,(0,i.Z)({valueType:"segmented",fieldProps:I,ref:L,request:R,params:Z,filedConfig:{customLightMode:!0},proFieldProps:P},u))},M=D.forwardRef(c);C.Z=M},64317:function(b,C,e){var i=e(1413),a=e(91),D=e(22270),d=e(67294),T=e(66758),l=e(57812),c=e(85893),M=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],m=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],o=function(u,S){var F=u.fieldProps,s=u.children,t=u.params,g=u.proFieldProps,x=u.mode,K=u.valueEnum,v=u.request,E=u.showSearch,r=u.options,W=(0,a.Z)(u,M),B=(0,d.useContext)(T.Z);return(0,c.jsx)(l.Z,(0,i.Z)((0,i.Z)({valueEnum:(0,D.h)(K),request:v,params:t,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,i.Z)({options:r,mode:x,showSearch:E,getPopupContainer:B.getPopupContainer},F),ref:S,proFieldProps:g},W),{},{children:s}))},L=d.forwardRef(function(P,u){var S=P.fieldProps,F=P.children,s=P.params,t=P.proFieldProps,g=P.mode,x=P.valueEnum,K=P.request,v=P.options,E=(0,a.Z)(P,m),r=(0,i.Z)({options:v,mode:g||"multiple",labelInValue:!0,showSearch:!0,suffixIcon:null,autoClearSearchValue:!0,optionLabelProp:"label"},S),W=(0,d.useContext)(T.Z);return(0,c.jsx)(l.Z,(0,i.Z)((0,i.Z)({valueEnum:(0,D.h)(x),request:K,params:s,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,i.Z)({getPopupContainer:W.getPopupContainer},r),ref:u,proFieldProps:t},E),{},{children:F}))}),I=d.forwardRef(o),R=L,Z=I;Z.SearchSelect=R,Z.displayName="ProFormComponent",C.Z=Z},90672:function(b,C,e){var i=e(1413),a=e(91),D=e(67294),d=e(57812),T=e(85893),l=["fieldProps","proFieldProps"],c=function(m,o){var L=m.fieldProps,I=m.proFieldProps,R=(0,a.Z)(m,l);return(0,T.jsx)(d.Z,(0,i.Z)({ref:o,valueType:"textarea",fieldProps:L,proFieldProps:I},R))};C.Z=D.forwardRef(c)},5966:function(b,C,e){var i=e(97685),a=e(1413),D=e(91),d=e(21770),T=e(47019),l=e(55241),c=e(98423),M=e(67294),m=e(57812),o=e(85893),L=["fieldProps","proFieldProps"],I=["fieldProps","proFieldProps"],R="text",Z=function(s){var t=s.fieldProps,g=s.proFieldProps,x=(0,D.Z)(s,L);return(0,o.jsx)(m.Z,(0,a.Z)({valueType:R,fieldProps:t,filedConfig:{valueType:R},proFieldProps:g},x))},P=function(s){var t=(0,d.Z)(s.open||!1,{value:s.open,onChange:s.onOpenChange}),g=(0,i.Z)(t,2),x=g[0],K=g[1];return(0,o.jsx)(T.Z.Item,{shouldUpdate:!0,noStyle:!0,children:function(E){var r,W=E.getFieldValue(s.name||[]);return(0,o.jsx)(l.Z,(0,a.Z)((0,a.Z)({getPopupContainer:function(h){return h&&h.parentNode?h.parentNode:h},onOpenChange:function(h){return K(h)},content:(0,o.jsxs)("div",{style:{padding:"4px 0"},children:[(r=s.statusRender)===null||r===void 0?void 0:r.call(s,W),s.strengthText?(0,o.jsx)("div",{style:{marginTop:10},children:(0,o.jsx)("span",{children:s.strengthText})}):null]}),overlayStyle:{width:240},placement:"rightTop"},s.popoverProps),{},{open:x,children:s.children}))}})},u=function(s){var t=s.fieldProps,g=s.proFieldProps,x=(0,D.Z)(s,I),K=(0,M.useState)(!1),v=(0,i.Z)(K,2),E=v[0],r=v[1];return t!=null&&t.statusRender&&x.name?(0,o.jsx)(P,{name:x.name,statusRender:t==null?void 0:t.statusRender,popoverProps:t==null?void 0:t.popoverProps,strengthText:t==null?void 0:t.strengthText,open:E,onOpenChange:r,children:(0,o.jsx)("div",{children:(0,o.jsx)(m.Z,(0,a.Z)({valueType:"password",fieldProps:(0,a.Z)((0,a.Z)({},(0,c.Z)(t,["statusRender","popoverProps","strengthText"])),{},{onBlur:function(B){var h;t==null||(h=t.onBlur)===null||h===void 0||h.call(t,B),r(!1)},onClick:function(B){var h;t==null||(h=t.onClick)===null||h===void 0||h.call(t,B),r(!0)}}),proFieldProps:g,filedConfig:{valueType:R}},x))})}):(0,o.jsx)(m.Z,(0,a.Z)({valueType:"password",fieldProps:t,proFieldProps:g,filedConfig:{valueType:R}},x))},S=Z;S.Password=u,S.displayName="ProFormComponent",C.Z=S},29809:function(b,C,e){e.r(C);var i=e(97857),a=e.n(i),D=e(5574),d=e.n(D),T=e(15009),l=e.n(T),c=e(99289),M=e.n(c),m=e(6110),o=e(34994),L=e(2236),I=e(38345),R=e(5966),Z=e(90672),P=e(21134),u=e(64317),S=e(5155),F=e(2453),s=e(47019),t=e(71230),g=e(15746),x=e(83622),K=e(51042),v=e(67294),E=e(76772),r=e(85893),W=function(){var $=arguments.length>0&&arguments[0]!==void 0?arguments[0]:100;return new Promise(function(n){setTimeout(function(){n(!0)},$)})},B={title:"",description:"",status:"",category_id:"",users:""},h=function(){var Y=M()(l()().mark(function $(n,z){var Q,w;return l()().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return console.log("onFinishHandlerForm"),console.log("Received values of form: ",n),A.prev=2,w={title:n==null?void 0:n.title,description:n==null?void 0:n.description,status:n==null?void 0:n.status,author_id:z,category_id:n==null?void 0:n.category_id,users:(n==null||(Q=n.users)===null||Q===void 0?void 0:Q.map(function(U){return U==null?void 0:U.user}))||[]},A.next=6,(0,E.request)("/api/classes/"+(n==null?void 0:n.class_id),{method:"PUT",data:w}).then(function(){var U=M()(l()().mark(function N(y){var V,H;return l()().wrap(function(J){for(;;)switch(J.prev=J.next){case 0:(y==null||(V=y.data)===null||V===void 0?void 0:V.id)>0&&(F.ZP.success("Submitted successfully"),E.history.push("/tutor-app/classes/edit/"+(y==null||(H=y.data)===null||H===void 0?void 0:H.id)));case 1:case"end":return J.stop()}},N)}));return function(N){return U.apply(this,arguments)}}()).catch(function(U){console.log(U)});case 6:return A.abrupt("return",A.sent);case 9:A.prev=9,A.t0=A.catch(2),console.log("api_response - error"),console.log(A.t0);case 13:return A.abrupt("return",!0);case 14:case"end":return A.stop()}},$,null,[[2,9]])}));return function(n,z){return Y.apply(this,arguments)}}(),ue=function(){var $=(0,E.useParams)(),n=(0,E.useModel)("@@initialState"),z=n.initialState,Q=n.loading,w=n.refresh,pe=n.setInitialState,A=(0,v.useState)(0),U=d()(A,2),N=U[0],y=U[1],V=s.Z.useForm(),H=d()(V,1),se=H[0],J=(0,v.useState)([]),ae=d()(J,2),ce=ae[0],me=ae[1],Pe=(0,v.useState)([]),le=d()(Pe,2),ve=le[0],Ee=le[1],he=(0,v.useState)(0),_e=d()(he,2),ie=_e[0],De=_e[1];return(0,v.useEffect)(function(){var j;y(z==null||(j=z.currentUser)===null||j===void 0?void 0:j.id)},[]),(0,v.useEffect)(function(){De($.id)},[]),(0,v.useEffect)(function(){return(0,E.request)("/api/categories",{}).then(function(j){var p=j.data.data.map(function(_,k){return{value:_==null?void 0:_.id,label:_==null?void 0:_.title}});return me(p),p})},[]),(0,v.useEffect)(function(){return(0,E.request)("/api/users",{params:{role:"user",page:1,per_page:1e3}}).then(function(j){var p=j.data.data.map(function(_,k){return{value:_==null?void 0:_.id,label:_==null?void 0:_.name}});return Ee(p),p})},[]),(0,r.jsxs)(m._z,{children:[(0,r.jsxs)(t.Z,{gutter:{xs:8,sm:16,md:24,lg:32},children:[(0,r.jsx)(g.Z,{flex:"auto"}),(0,r.jsx)(g.Z,{flex:"100px",children:(0,r.jsxs)(x.ZP,{type:"primary",onClick:function(){E.history.push("/tutor-app/classes/new")},style:{marginBlockEnd:15},children:[(0,r.jsx)(K.Z,{})," New"]},"new")})]}),(0,r.jsxs)(o.A,{layout:"vertical",grid:!0,initialValues:B,form:se,params:{class_id:ie},request:M()(l()().mark(function j(){var p,_=arguments;return l()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:if(p=_.length>0&&_[0]!==void 0?_[0]:{},(p==null?void 0:p.class_id)!=0){O.next=3;break}return O.abrupt("return");case 3:return O.next=5,W(2e3);case 5:return O.next=7,(0,E.request)("/api/classes/"+(p==null?void 0:p.class_id),{method:"GET"}).then(function(){var q=M()(l()().mark(function de(f){var ee,re,te,oe,G;return l()().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return X.abrupt("return",a()(a()({},B),{},{title:f==null||(ee=f.data)===null||ee===void 0?void 0:ee.title,description:f==null||(re=f.data)===null||re===void 0?void 0:re.description,status:f==null||(te=f.data)===null||te===void 0?void 0:te.status,category_id:f==null||(oe=f.data)===null||oe===void 0?void 0:oe.category_id,users:(f==null||(G=f.data)===null||G===void 0||(G=G.users)===null||G===void 0?void 0:G.map(function(ne){return{user:ne==null?void 0:ne.id}}))||[]}));case 1:case"end":return X.stop()}},de)}));return function(de){return q.apply(this,arguments)}}()).catch(function(q){console.log(q)});case 7:return O.abrupt("return",O.sent);case 8:case"end":return O.stop()}},j)})),onFinish:function(){var j=M()(l()().mark(function p(_){return l()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.next=2,W(2e3);case 2:return _.class_id=ie,_.author_id=N,O.next=6,h(_,N);case 6:case"end":return O.stop()}},p)}));return function(p){return j.apply(this,arguments)}}(),submitter:{render:function(p,_){return(0,r.jsx)(L.S,{children:_})}},children:[(0,r.jsxs)(I.Z,{title:"Class Details",bordered:!0,headerBordered:!0,collapsible:!0,size:"default",type:"inner",style:{marginBlockEnd:15,minWidth:800,maxWidth:"100%"},onCollapse:function(p){return console.log(p)},children:[(0,r.jsx)(o.A.Group,{size:24,children:(0,r.jsx)(R.Z,{name:"title",label:"Title",placeholder:"Type Class Title",rules:[{required:!0}],colProps:{xs:24,sm:24,md:24,lg:24,xl:24}})}),(0,r.jsx)(o.A.Group,{size:24,children:(0,r.jsx)(Z.Z,{name:"description",label:"Description",fieldProps:{rows:6},placeholder:"Share a little description to fill out your class.",colProps:{xs:24,sm:24,md:24,lg:24,xl:24}})}),(0,r.jsxs)(o.A.Group,{size:24,children:[(0,r.jsx)(P.Z,{name:"status",label:"Status",initialValue:"in-active",valueEnum:{"in-active":"In-Active",active:"Active"},colProps:{xs:24,sm:24,md:6,lg:6,xl:6}}),(0,r.jsx)(u.Z,{name:"category_id",label:"Categories",showSearch:!0,options:ce,debounceTime:300,placeholder:"Please Select a Category",rules:[{required:!0}],colProps:{xs:24,sm:24,md:18,lg:18,xl:18}})]})]}),(0,r.jsx)(I.Z,{title:"Assign Users",bordered:!0,headerBordered:!0,collapsible:!0,size:"default",type:"inner",style:{marginBlockEnd:15,minWidth:800,maxWidth:"100%"},children:(0,r.jsx)(o.A.Group,{size:24,children:(0,r.jsx)(S.u,{name:"users",min:1,copyIconProps:{tooltipText:"Copy this user"},deleteIconProps:{tooltipText:"Delete this user"},creatorButtonProps:{creatorButtonText:"Add New User"},children:(0,r.jsx)(o.A.Group,{size:24,children:(0,r.jsx)(u.Z,{name:"user",label:"User",showSearch:!0,options:ve,debounceTime:300,placeholder:"Please Select a User",rules:[{required:!0}],colProps:{xs:24,sm:24,md:24,lg:24,xl:24}})})})})})]})]})};C.default=ue}}]);
