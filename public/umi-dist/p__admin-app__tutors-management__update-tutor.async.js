"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[62],{59954:function(Ee,S,e){e.r(S);var X=e(97857),F=e.n(X),w=e(5574),x=e.n(w),k=e(15009),s=e.n(k),q=e(99289),u=e.n(q),ee=e(6110),m=e(34994),ae=e(2236),re=e(38345),R=e(5966),oe=e(50335),ne=e(90672),$=e(2453),le=e(8232),G=e(71230),c=e(15746),N=e(83622),te=e(95715),_e=e(66476),se=e(51042),ie=e(88484),p=e(67294),h=e(76772),de=e(77181),ue=e(60352),me=e(58547),a=e(85893),H=function(){var v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:100;return new Promise(function(E){setTimeout(function(){E(!0)},v)})},V={image_url:"",name:"",email:"",date_of_birth:"",mobile_no:"",bio_data:""},ce=function(){var A=u()(s()().mark(function v(E,o){var b;return s()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return console.log("onFinishHandlerForm"),console.log("Received values of form: ",o),_.prev=2,b={image_url:E,name:o==null?void 0:o.name,email:o==null?void 0:o.email,date_of_birth:o==null?void 0:o.date_of_birth,mobile_no:o==null?void 0:o.mobile_no,bio_data:o==null?void 0:o.bio_data},_.next=6,(0,h.request)("/api/users/"+(o==null?void 0:o.user_id),{method:"PUT",data:b}).then(function(){var P=u()(s()().mark(function D(i){var M,O;return s()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:console.log("api_response"),console.log(i),(i==null||(M=i.data)===null||M===void 0?void 0:M.id)>0&&($.ZP.success("Submitted successfully"),h.history.push("/admin-app/tutors/edit/"+(i==null||(O=i.data)===null||O===void 0?void 0:O.id)));case 3:case"end":return j.stop()}},D)}));return function(D){return P.apply(this,arguments)}}()).catch(function(P){console.log(P)});case 6:return _.abrupt("return",_.sent);case 9:_.prev=9,_.t0=_.catch(2),console.log("api_response - error"),console.log(_.t0);case 13:return _.abrupt("return",!0);case 14:case"end":return _.stop()}},v,null,[[2,9]])}));return function(E,o){return A.apply(this,arguments)}}(),pe=function(){var v=(0,h.useParams)(),E=le.Z.useForm(),o=x()(E,1),b=o[0],Y=(0,p.useRef)(),_=(0,p.useRef)(),P=(0,p.useState)(0),D=x()(P,2),i=D[0],M=D[1],O=(0,p.useState)(""),U=x()(O,2),j=U[0],he=U[1],ve=(0,p.useState)(j),J=x()(ve,2),f=J[0],Q=J[1];return(0,p.useEffect)(function(){M(v.id)},[]),(0,a.jsxs)(ee._z,{children:[(0,a.jsxs)(G.Z,{gutter:{xs:8,sm:16,md:24,lg:32},children:[(0,a.jsx)(c.Z,{flex:"auto"}),(0,a.jsx)(c.Z,{flex:"100px",children:(0,a.jsxs)(N.ZP,{type:"primary",onClick:function(){h.history.push("/admin-app/tutors/new")},style:{marginBlockEnd:15},children:[(0,a.jsx)(se.Z,{})," New"]},"new")})]}),(0,a.jsxs)(m.A,{layout:"vertical",grid:!0,form:b,initialValues:V,params:{user_id:i},request:u()(s()().mark(function d(){var r,l=arguments;return s()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=l.length>0&&l[0]!==void 0?l[0]:{},console.log("proform-params"),console.log(r),(r==null?void 0:r.user_id)!=0){t.next=5;break}return t.abrupt("return");case 5:return t.next=7,H(2e3);case 7:return t.next=9,(0,h.request)("/api/users/"+(r==null?void 0:r.user_id),{method:"GET"}).then(function(){var C=u()(s()().mark(function g(n){var B,W,L,K,y,Z,z;return s()().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return console.log("api_response"),console.log(n),he(n==null||(B=n.data)===null||B===void 0?void 0:B.image_url),I.abrupt("return",F()(F()({},V),{},{image_url:n==null||(W=n.data)===null||W===void 0?void 0:W.image_url,name:n==null||(L=n.data)===null||L===void 0?void 0:L.name,email:n==null||(K=n.data)===null||K===void 0?void 0:K.email,date_of_birth:n==null||(y=n.data)===null||y===void 0?void 0:y.date_of_birth,mobile_no:n==null||(Z=n.data)===null||Z===void 0?void 0:Z.mobile_no,bio_data:n==null||(z=n.data)===null||z===void 0?void 0:z.bio_data}));case 4:case"end":return I.stop()}},g)}));return function(g){return C.apply(this,arguments)}}()).catch(function(C){console.log(C)});case 9:return t.abrupt("return",t.sent);case 10:case"end":return t.stop()}},d)})),onFinish:function(){var d=u()(s()().mark(function r(l){return s()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(l),t.next=3,H(1e3);case 3:return l.user_id=i,l.image_url=f,t.next=7,ce(f,l);case 7:case"end":return t.stop()}},r)}));return function(r){return d.apply(this,arguments)}}(),formProps:{validateMessages:{required:"This is required"}},submitter:{render:function(r,l){return(0,a.jsx)(ae.S,{children:l})}},children:[(0,a.jsx)(re.Z,{title:"BIO Details",bordered:!0,headerBordered:!0,collapsible:!0,size:"default",type:"inner",style:{marginBlockEnd:15,minWidth:800,maxWidth:"100%"},onCollapse:function(r){return console.log(r)},children:(0,a.jsxs)(G.Z,{gutter:{xs:8,sm:16,md:24,lg:32},children:[(0,a.jsx)(c.Z,{span:6,children:(0,a.jsxs)(m.A.Group,{size:24,children:[(0,a.jsx)(c.Z,{span:24,children:(0,a.jsx)(te.Z,{width:"100%",height:200,src:f,fallback:f!==""||f===null?f:"http://zia.project.localhost.com/images/default/user-profile-image.png"})}),(0,a.jsx)(c.Z,{span:24,style:{textAlign:"center"},children:(0,a.jsx)(m.A.Item,{name:"image_url",getValueFromEvent:me.h,children:(0,a.jsx)(_e.Z,{name:"file",onChange:function(r){if(console.log("file - onChange - info"),console.log(r),r.file.status!=="uploading"){if(r.file.status=="removed"&&Q(""),r.file.status==="done"){var l;Q(r==null||(l=r.file)===null||l===void 0||(l=l.response)===null||l===void 0?void 0:l.url)}r.file.status==="error"&&$.ZP.error("".concat(r.file.name," file upload failed."))}},maxCount:1,action:"/api/file-manager/upload",data:{directory:"users"},onRemove:function(r){console.log("file is removed"),console.log(r),(0,h.request)("/api/file-manager/delete",{method:"DELETE",data:{filename:r==null?void 0:r.name,directory:"users"}}).then(function(){var l=u()(s()().mark(function T(t){return s()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:console.log("api_response"),console.log(t);case 2:case"end":return g.stop()}},T)}));return function(T){return l.apply(this,arguments)}}())},children:(0,a.jsx)(N.ZP,{type:"primary",icon:(0,a.jsx)(ie.Z,{}),style:{margin:"10px 0px 0px 0px"},onClick:function(r){},children:"Change Image"})})})})]})}),(0,a.jsxs)(c.Z,{span:18,children:[(0,a.jsxs)(m.A.Group,{size:24,children:[(0,a.jsx)(R.Z,{name:"name",label:"Name",placeholder:"Type Your Name",colProps:{xs:24,sm:24,md:12,lg:12,xl:12}}),(0,a.jsx)(R.Z,{label:"Email",name:"email",placeholder:"info@example.com etc.",rules:[{required:!0}],disabled:!0,colProps:{xs:24,sm:24,md:12,lg:12,xl:12}})]}),(0,a.jsxs)(m.A.Group,{size:24,children:[(0,a.jsx)(oe.Z,{label:"Date of Birth",name:"date_of_birth",colProps:{xs:24,sm:24,md:12,lg:12,xl:12}}),(0,a.jsx)(R.Z,{name:"mobile_no",label:"Mobile No",placeholder:"Type Your Mobile No",colProps:{xs:24,sm:24,md:12,lg:12,xl:12}})]}),(0,a.jsx)(m.A.Group,{size:24,children:(0,a.jsx)(ne.Z,{name:"bio_data",label:"Biographical Info",fieldProps:{rows:6},placeholder:"Share a little biographical information to fill out your profile. This may be shown publicly. ",colProps:{xs:24,sm:24,md:24,lg:24,xl:24}})})]})]})}),(0,a.jsx)(de.Z,{qualificationsTableRef:Y,tutorID:i}),",",(0,a.jsx)(ue.Z,{experiencesTableRef:_,tutorID:i})]})]})};S.default=pe}}]);
