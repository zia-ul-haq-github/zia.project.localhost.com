"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[4062],{59954:function(ge,H,o){o.r(H);var ee=o(97857),V=o.n(ee),re=o(5574),U=o.n(re),le=o(15009),i=o.n(le),oe=o(99289),p=o.n(oe),ae=o(6110),u=o(34994),ne=o(2236),Y=o(38345),c=o(5966),te=o(50335),se=o(90672),J=o(2453),ie=o(47019),Q=o(71230),h=o(15746),X=o(83622),de=o(95715),_e=o(66476),ue=o(51042),me=o(88484),O=o(67294),v=o(76772),ce=o(77181),pe=o(60352),he=o(58547),e=o(85893),w=function(){var E=arguments.length>0&&arguments[0]!==void 0?arguments[0]:100;return new Promise(function(g){setTimeout(function(){g(!0)},E)})},q={image_url:"",name:"",role:"",email:"",date_of_birth:"",mobile_no:"",bio_data:"",address:""},ve=function(){var W=p()(i()().mark(function E(g,r){var A;return i()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return console.log("onFinishHandlerForm"),console.log("Received values of form: ",r),s.prev=2,A={image_url:g,name:r==null?void 0:r.name,role:"tutor",email:r==null?void 0:r.email,date_of_birth:r==null?void 0:r.date_of_birth,mobile_no:r==null?void 0:r.mobile_no,bio_data:r==null?void 0:r.bio_data,address:{street:r==null?void 0:r.street,country:r==null?void 0:r.country,province:r==null?void 0:r.province,city:r==null?void 0:r.city,postal_code:r==null?void 0:r.postal_code}},s.next=6,(0,v.request)("/api/users/"+(r==null?void 0:r.user_id),{method:"PUT",data:A}).then(function(){var b=p()(i()().mark(function C(d){var T,y;return i()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:console.log("api_response"),console.log(d),(d==null||(T=d.data)===null||T===void 0?void 0:T.id)>0&&(J.ZP.success("Submitted successfully"),v.history.push("/admin-app/tutors/edit/"+(d==null||(y=d.data)===null||y===void 0?void 0:y.id)));case 3:case"end":return _.stop()}},C)}));return function(C){return b.apply(this,arguments)}}()).catch(function(b){console.log(b)});case 6:return s.abrupt("return",s.sent);case 9:s.prev=9,s.t0=s.catch(2),console.log("api_response - error"),console.log(s.t0);case 13:return s.abrupt("return",!0);case 14:case"end":return s.stop()}},E,null,[[2,9]])}));return function(g,r){return W.apply(this,arguments)}}(),Ee=function(){var E=(0,v.useParams)(),g=ie.Z.useForm(),r=U()(g,1),A=r[0],k=(0,O.useRef)(),s=(0,O.useRef)(),b=(0,O.useState)(0),C=U()(b,2),d=C[0],T=C[1],y=(0,O.useState)("http://zia.project.localhost.com/images/default/user-profile-image.png"),Z=U()(y,2),_=Z[0],L=Z[1];return(0,O.useEffect)(function(){T(E.id)},[]),(0,e.jsxs)(ae._z,{children:[(0,e.jsxs)(Q.Z,{gutter:{xs:8,sm:16,md:24,lg:32},children:[(0,e.jsx)(h.Z,{flex:"auto"}),(0,e.jsx)(h.Z,{flex:"100px",children:(0,e.jsxs)(X.ZP,{type:"primary",onClick:function(){v.history.push("/admin-app/tutors/new")},style:{marginBlockEnd:15},children:[(0,e.jsx)(ue.Z,{})," New"]},"new")})]}),(0,e.jsxs)(u.A,{layout:"vertical",grid:!0,form:A,initialValues:q,params:{user_id:d},request:p()(i()().mark(function m(){var a,n=arguments;return i()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a=n.length>0&&n[0]!==void 0?n[0]:{},console.log("proform-params"),console.log(a),(a==null?void 0:a.user_id)!=0){t.next=5;break}return t.abrupt("return");case 5:return t.next=7,w(2e3);case 7:return t.next=9,(0,v.request)("/api/users/"+(a==null?void 0:a.user_id),{method:"GET"}).then(function(){var I=p()(i()().mark(function f(l){var K,z,$,F,S,G,N,P,x,D,j,M;return i()().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return console.log("api_response"),console.log(l),L(l==null||(K=l.data)===null||K===void 0?void 0:K.image_url),B.abrupt("return",V()(V()({},q),{},{image_url:l==null||(z=l.data)===null||z===void 0?void 0:z.image_url,name:l==null||($=l.data)===null||$===void 0?void 0:$.name,email:l==null||(F=l.data)===null||F===void 0?void 0:F.email,date_of_birth:l==null||(S=l.data)===null||S===void 0?void 0:S.date_of_birth,mobile_no:l==null||(G=l.data)===null||G===void 0?void 0:G.mobile_no,bio_data:l==null||(N=l.data)===null||N===void 0?void 0:N.bio_data,street:l==null||(P=l.data)===null||P===void 0||(P=P.address)===null||P===void 0?void 0:P.street,country:l==null||(x=l.data)===null||x===void 0||(x=x.address)===null||x===void 0?void 0:x.country,province:l==null||(D=l.data)===null||D===void 0||(D=D.address)===null||D===void 0?void 0:D.province,city:l==null||(j=l.data)===null||j===void 0||(j=j.address)===null||j===void 0?void 0:j.city,postal_code:l==null||(M=l.data)===null||M===void 0||(M=M.address)===null||M===void 0?void 0:M.postal_code}));case 4:case"end":return B.stop()}},f)}));return function(f){return I.apply(this,arguments)}}()).catch(function(I){console.log(I)});case 9:return t.abrupt("return",t.sent);case 10:case"end":return t.stop()}},m)})),onFinish:function(){var m=p()(i()().mark(function a(n){return i()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(n),t.next=3,w(1e3);case 3:return n.user_id=d,n.image_url=_,t.next=7,ve(_,n);case 7:case"end":return t.stop()}},a)}));return function(a){return m.apply(this,arguments)}}(),formProps:{validateMessages:{required:"This is required"}},submitter:{render:function(a,n){return(0,e.jsx)(ne.S,{children:n})}},children:[(0,e.jsx)(Y.Z,{title:"BIO Details",bordered:!0,headerBordered:!0,collapsible:!0,size:"default",type:"inner",style:{marginBlockEnd:15,minWidth:800,maxWidth:"100%"},onCollapse:function(a){return console.log(a)},children:(0,e.jsxs)(Q.Z,{gutter:{xs:8,sm:16,md:24,lg:32},children:[(0,e.jsx)(h.Z,{span:6,children:(0,e.jsxs)(u.A.Group,{size:24,children:[(0,e.jsx)(h.Z,{span:24,children:(0,e.jsx)(de.Z,{width:"100%",height:200,src:_,fallback:_!==""||_===null?_:"http://zia.project.localhost.com/images/default/user-profile-image.png"})}),(0,e.jsx)(h.Z,{span:24,style:{textAlign:"center"},children:(0,e.jsx)(u.A.Item,{name:"image_url",getValueFromEvent:he.h,children:(0,e.jsx)(_e.Z,{name:"file",onChange:function(a){if(console.log("file - onChange - info"),console.log(a),a.file.status!=="uploading"){if(a.file.status=="removed"&&L(""),a.file.status==="done"){var n;L(a==null||(n=a.file)===null||n===void 0||(n=n.response)===null||n===void 0?void 0:n.url)}a.file.status==="error"&&J.ZP.error("".concat(a.file.name," file upload failed."))}},maxCount:1,action:"/api/file-manager/upload",data:{directory:"users"},onRemove:function(a){console.log("file is removed"),console.log(a),(0,v.request)("/api/file-manager/delete",{method:"DELETE",data:{filename:a==null?void 0:a.name,directory:"users"}}).then(function(){var n=p()(i()().mark(function R(t){return i()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:console.log("api_response"),console.log(t);case 2:case"end":return f.stop()}},R)}));return function(R){return n.apply(this,arguments)}}())},children:(0,e.jsx)(X.ZP,{type:"primary",icon:(0,e.jsx)(me.Z,{}),style:{margin:"10px 0px 0px 0px"},onClick:function(a){},children:"Change Image"})})})})]})}),(0,e.jsxs)(h.Z,{span:18,children:[(0,e.jsxs)(u.A.Group,{size:24,children:[(0,e.jsx)(c.Z,{name:"name",label:"Name",placeholder:"Type Your Name",rules:[{required:!0}],colProps:{xs:24,sm:24,md:12,lg:12,xl:12}}),(0,e.jsx)(c.Z,{label:"Email",name:"email",placeholder:"info@example.com etc.",rules:[{required:!0}],disabled:!0,colProps:{xs:24,sm:24,md:12,lg:12,xl:12}})]}),(0,e.jsxs)(u.A.Group,{size:24,children:[(0,e.jsx)(te.Z,{label:"Date of Birth",name:"date_of_birth",rules:[{required:!0}],colProps:{xs:24,sm:24,md:12,lg:12,xl:12}}),(0,e.jsx)(c.Z,{name:"mobile_no",label:"Mobile No",placeholder:"Type Your Mobile No",rules:[{required:!0}],colProps:{xs:24,sm:24,md:12,lg:12,xl:12}})]}),(0,e.jsx)(u.A.Group,{size:24,children:(0,e.jsx)(se.Z,{name:"bio_data",label:"Biographical Info",fieldProps:{rows:6},placeholder:"Share a little biographical information to fill out your profile. This may be shown publicly. ",rules:[{required:!0}],colProps:{xs:24,sm:24,md:24,lg:24,xl:24}})})]})]})}),(0,e.jsxs)(Y.Z,{title:"Address Details",bordered:!0,headerBordered:!0,collapsible:!0,size:"default",type:"inner",style:{marginBlockEnd:15,minWidth:800,maxWidth:"100%"},children:[(0,e.jsx)(u.A.Group,{size:24,children:(0,e.jsx)(c.Z,{name:"street",label:"Street address",placeholder:"Please Enter Street Address",rules:[{required:!0}],colProps:{xs:24,sm:24,md:24,lg:24,xl:24}})}),(0,e.jsxs)(u.A.Group,{size:24,children:[(0,e.jsx)(c.Z,{name:"country",label:"Country / Region",placeholder:"Please Enter Country / Region",rules:[{required:!0}],colProps:{xs:24,sm:24,md:12,lg:12,xl:12}}),(0,e.jsx)(c.Z,{name:"province",label:"Province",placeholder:"Please Enter Province",rules:[{required:!0}],colProps:{xs:24,sm:24,md:12,lg:12,xl:12}})]}),(0,e.jsxs)(u.A.Group,{size:24,children:[(0,e.jsx)(c.Z,{name:"city",label:"City",placeholder:"Please Enter City",rules:[{required:!0}],colProps:{xs:24,sm:24,md:12,lg:12,xl:12}}),(0,e.jsx)(c.Z,{name:"postal_code",label:"Postal Code / ZIP",placeholder:"Please Enter Post Code / ZIP",rules:[{required:!0}],colProps:{xs:24,sm:24,md:12,lg:12,xl:12}})]})]}),(0,e.jsx)(ce.Z,{qualificationsTableRef:k,tutorID:d}),",",(0,e.jsx)(pe.Z,{experiencesTableRef:s,tutorID:d})]})]})};H.default=Ee}}]);
