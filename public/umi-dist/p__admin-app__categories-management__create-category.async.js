"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[506],{64317:function(Y,M,e){var c=e(1413),m=e(91),A=e(22270),a=e(67294),d=e(66758),h=e(68256),O=e(85893),s=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],D=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],B=function(l,I){var P=l.fieldProps,R=l.children,U=l.params,W=l.proFieldProps,L=l.mode,v=l.valueEnum,E=l.request,y=l.showSearch,r=l.options,S=(0,m.Z)(l,s),w=(0,a.useContext)(d.Z);return(0,O.jsx)(h.Z,(0,c.Z)((0,c.Z)({valueEnum:(0,A.h)(v),request:E,params:U,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,c.Z)({options:r,mode:L,showSearch:y,getPopupContainer:w.getPopupContainer},P),ref:I,proFieldProps:W},S),{},{children:R}))},H=a.forwardRef(function(_,l){var I=_.fieldProps,P=_.children,R=_.params,U=_.proFieldProps,W=_.mode,L=_.valueEnum,v=_.request,E=_.options,y=(0,m.Z)(_,D),r=(0,c.Z)({options:E,mode:W||"multiple",labelInValue:!0,showSearch:!0,suffixIcon:null,autoClearSearchValue:!0,optionLabelProp:"label"},I),S=(0,a.useContext)(d.Z);return(0,O.jsx)(h.Z,(0,c.Z)((0,c.Z)({valueEnum:(0,A.h)(L),request:v,params:R,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,c.Z)({getPopupContainer:S.getPopupContainer},r),ref:l,proFieldProps:U},y),{},{children:P}))}),N=a.forwardRef(B),G=H,C=N;C.SearchSelect=G,C.displayName="ProFormComponent",M.Z=C},58547:function(Y,M,e){e.d(M,{h:function(){return m}});var c=e(67294),m=function(d){return Array.isArray(d)?d:d&&d.fileList},A=function(d){return new Promise(function(h,O){var s=new FileReader;s.readAsDataURL(d.file.originFileObj),s.onload=function(){var D=s.result;h(D)},s.onerror=function(D){return O(D)}})}},33687:function(Y,M,e){e.r(M);var c=e(5574),m=e.n(c),A=e(15009),a=e.n(A),d=e(99289),h=e.n(d),O=e(6110),s=e(34994),D=e(2236),B=e(38345),H=e(5966),N=e(90672),G=e(5155),C=e(64317),_=e(2453),l=e(8232),I=e(71230),P=e(15746),R=e(95715),U=e(66476),W=e(83622),L=e(88484),v=e(67294),E=e(76772),y=e(58547),r=e(85893),S=function(){var x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:100;return new Promise(function(n){setTimeout(function(){n(!0)},x)})},w=function(){var J=h()(a()().mark(function x(n,V){var K,T,F;return a()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return console.log("onFinishHandlerForm"),console.log("Received values of form: ",n),i.prev=2,F={image_url:V,title:n==null?void 0:n.title,description:n==null?void 0:n.description,author_id:1,tutors:(n==null||(K=n.tutors)===null||K===void 0?void 0:K.map(function(u){return u==null?void 0:u.tutor}))||[],users:(n==null||(T=n.users)===null||T===void 0?void 0:T.map(function(u){return u==null?void 0:u.user}))||[]},i.next=6,(0,E.request)("/api/categories",{method:"POST",data:F}).then(function(){var u=h()(a()().mark(function $(g){var Z,j;return a()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:(g==null||(Z=g.data)===null||Z===void 0?void 0:Z.id)>0&&(_.ZP.success("Submitted successfully"),E.history.push("/admin-app/categories/edit/"+(g==null||(j=g.data)===null||j===void 0?void 0:j.id)));case 1:case"end":return b.stop()}},$)}));return function($){return u.apply(this,arguments)}}()).catch(function(u){console.log(u)});case 6:return i.abrupt("return",i.sent);case 9:i.prev=9,i.t0=i.catch(2),console.log("api_response - error"),console.log(i.t0);case 13:return i.abrupt("return",!0);case 14:case"end":return i.stop()}},x,null,[[2,9]])}));return function(n,V){return J.apply(this,arguments)}}(),q=function(){var x=l.Z.useForm(),n=m()(x,1),V=n[0],K=(0,v.useState)("http://zia.project.localhost.com/images/default/placeholder.jpg"),T=m()(K,2),F=T[0],Q=T[1],i=(0,v.useState)([]),u=m()(i,2),$=u[0],g=u[1],Z=(0,v.useState)([]),j=m()(Z,2),k=j[0],b=j[1],ee={tutors:[{tutor:void 0}],users:[{user:void 0}]};return(0,v.useEffect)(function(){return(0,E.request)("/api/users",{params:{role:"tutor",page:1,per_page:1e3}}).then(function(p){var o=p.data.data.map(function(t,z){return{value:t==null?void 0:t.id,label:t==null?void 0:t.name}});return g(o),o})},[]),(0,v.useEffect)(function(){return(0,E.request)("/api/users",{params:{role:"user",page:1,per_page:1e3}}).then(function(p){var o=p.data.data.map(function(t,z){return{value:t==null?void 0:t.id,label:t==null?void 0:t.name}});return b(o),o})},[]),(0,r.jsx)(O._z,{children:(0,r.jsxs)(s.A,{onFinish:function(){var p=h()(a()().mark(function o(t){return a()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,S(2e3);case 2:return f.next=4,w(t,F);case 4:case"end":return f.stop()}},o)}));return function(o){return p.apply(this,arguments)}}(),layout:"vertical",grid:!0,initialValues:ee,form:V,submitter:{render:function(o,t){return(0,r.jsx)(D.S,{children:t})}},children:[(0,r.jsx)(B.Z,{title:"Category Details",bordered:!0,headerBordered:!0,collapsible:!0,size:"default",type:"inner",style:{marginBlockEnd:15,minWidth:800,maxWidth:"100%"},onCollapse:function(o){return console.log(o)},children:(0,r.jsxs)(I.Z,{gutter:{xs:8,sm:16,md:24,lg:32},children:[(0,r.jsx)(P.Z,{span:6,children:(0,r.jsxs)(s.A.Group,{size:24,children:[(0,r.jsx)(P.Z,{span:24,children:(0,r.jsx)(R.Z,{width:"100%",height:200,src:F})}),(0,r.jsx)(P.Z,{span:24,style:{textAlign:"center"},children:(0,r.jsx)(s.A.Item,{name:"image_url",getValueFromEvent:y.h,children:(0,r.jsx)(U.Z,{name:"file",onChange:function(o){if(console.log("file - onChange - info"),console.log(o),o.file.status!=="uploading"){if(o.file.status=="removed"&&Q(""),o.file.status==="done"){var t;Q(o==null||(t=o.file)===null||t===void 0||(t=t.response)===null||t===void 0?void 0:t.url)}o.file.status==="error"&&_.ZP.error("".concat(o.file.name," file upload failed."))}},maxCount:1,action:"/api/file-manager/upload",data:{directory:"categories"},onRemove:function(o){console.log("file is removed"),console.log(o),(0,E.request)("/api/file-manager/delete",{method:"DELETE",data:{filename:o==null?void 0:o.name,directory:"categories"}}).then(function(){var t=h()(a()().mark(function z(f){return a()().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:console.log("api_response"),console.log(f);case 2:case"end":return X.stop()}},z)}));return function(z){return t.apply(this,arguments)}}())},children:(0,r.jsx)(W.ZP,{type:"primary",icon:(0,r.jsx)(L.Z,{}),style:{margin:"10px 0px 0px 0px"},onClick:function(o){},children:"Change Image"})})})})]})}),(0,r.jsxs)(P.Z,{span:18,children:[(0,r.jsx)(s.A.Group,{size:24,children:(0,r.jsx)(H.Z,{name:"title",label:"Title",placeholder:"Type Category Title",colProps:{xs:24,sm:24,md:24,lg:24,xl:24}})}),(0,r.jsx)(s.A.Group,{size:24,children:(0,r.jsx)(N.Z,{name:"description",label:"Description",fieldProps:{rows:6},placeholder:"Share a little description to fill out your category.",colProps:{xs:24,sm:24,md:24,lg:24,xl:24}})})]})]})}),(0,r.jsx)(B.Z,{title:"Assign Tutors",bordered:!0,headerBordered:!0,collapsible:!0,size:"default",type:"inner",style:{marginBlockEnd:15,minWidth:800,maxWidth:"100%"},children:(0,r.jsx)(s.A.Group,{size:24,children:(0,r.jsx)(G.u,{name:"tutors",min:1,copyIconProps:{tooltipText:"Copy this tutor"},deleteIconProps:{tooltipText:"Delete this tutor"},creatorButtonProps:{creatorButtonText:"Add New Tutor"},children:(0,r.jsx)(s.A.Group,{size:24,children:(0,r.jsx)(C.Z,{name:"tutor",label:"Tutor",showSearch:!0,options:$,debounceTime:300,placeholder:"Please Select a Tutor",rules:[{required:!0}],colProps:{xs:24,sm:24,md:24,lg:24,xl:24}})})})})}),(0,r.jsx)(B.Z,{title:"Assign Users",bordered:!0,headerBordered:!0,collapsible:!0,size:"default",type:"inner",style:{marginBlockEnd:15,minWidth:800,maxWidth:"100%"},children:(0,r.jsx)(s.A.Group,{size:24,children:(0,r.jsx)(G.u,{name:"users",min:1,copyIconProps:{tooltipText:"Copy this user"},deleteIconProps:{tooltipText:"Delete this user"},creatorButtonProps:{creatorButtonText:"Add New User"},children:(0,r.jsx)(s.A.Group,{size:24,children:(0,r.jsx)(C.Z,{name:"user",label:"User",showSearch:!0,options:k,debounceTime:300,placeholder:"Please Select a User",rules:[{required:!0}],colProps:{xs:24,sm:24,md:24,lg:24,xl:24}})})})})})]})})};M.default=q}}]);
