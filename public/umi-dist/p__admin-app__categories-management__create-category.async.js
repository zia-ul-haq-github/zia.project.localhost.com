"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[5506],{88484:function(V,v,e){e.d(v,{Z:function(){return a}});var l=e(1413),i=e(67294),g={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"},n=g,u=e(91146),m=function(C,B){return i.createElement(u.Z,(0,l.Z)((0,l.Z)({},C),{},{ref:B,icon:n}))},d=i.forwardRef(m),a=d},38345:function(V,v,e){var l=e(1413),i=e(53911),g=e(44962),n=e(13286),u=e(85893),m=function(E){return(0,u.jsx)(i.Z,(0,l.Z)({bodyStyle:{padding:0}},E))},d=i.Z;d.isProCard=!0,d.Divider=g.Z,d.TabPane=n.Z,d.Group=m,v.Z=d},64317:function(V,v,e){var l=e(1413),i=e(91),g=e(22270),n=e(67294),u=e(66758),m=e(57812),d=e(85893),a=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],E=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],C=function(_,I){var O=_.fieldProps,R=_.children,W=_.params,L=_.proFieldProps,Z=_.mode,D=_.valueEnum,f=_.request,y=_.showSearch,r=_.options,K=(0,i.Z)(_,a),Q=(0,n.useContext)(u.Z);return(0,d.jsx)(m.Z,(0,l.Z)((0,l.Z)({valueEnum:(0,g.h)(D),request:f,params:W,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,l.Z)({options:r,mode:Z,showSearch:y,getPopupContainer:Q.getPopupContainer},O),ref:I,proFieldProps:L},K),{},{children:R}))},B=n.forwardRef(function(h,_){var I=h.fieldProps,O=h.children,R=h.params,W=h.proFieldProps,L=h.mode,Z=h.valueEnum,D=h.request,f=h.options,y=(0,i.Z)(h,E),r=(0,l.Z)({options:f,mode:L||"multiple",labelInValue:!0,showSearch:!0,suffixIcon:null,autoClearSearchValue:!0,optionLabelProp:"label"},I),K=(0,n.useContext)(u.Z);return(0,d.jsx)(m.Z,(0,l.Z)((0,l.Z)({valueEnum:(0,g.h)(Z),request:D,params:R,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,l.Z)({getPopupContainer:K.getPopupContainer},r),ref:_,proFieldProps:W},y),{},{children:O}))}),J=n.forwardRef(C),H=B,x=J;x.SearchSelect=H,x.displayName="ProFormComponent",v.Z=x},58547:function(V,v,e){e.d(v,{h:function(){return i}});var l=e(67294),i=function(u){return Array.isArray(u)?u:u&&u.fileList},g=function(u){return new Promise(function(m,d){var a=new FileReader;a.readAsDataURL(u.file.originFileObj),a.onload=function(){var E=a.result;m(E)},a.onerror=function(E){return d(E)}})}},33687:function(V,v,e){e.r(v);var l=e(5574),i=e.n(l),g=e(15009),n=e.n(g),u=e(99289),m=e.n(u),d=e(6110),a=e(34994),E=e(2236),C=e(38345),B=e(5966),J=e(90672),H=e(5155),x=e(64317),h=e(2453),_=e(47019),I=e(71230),O=e(15746),R=e(95715),W=e(66476),L=e(83622),Z=e(88484),D=e(67294),f=e(76772),y=e(58547),r=e(85893),K=function(){var j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:100;return new Promise(function(s){setTimeout(function(){s(!0)},j)})},Q=function(){var X=m()(n()().mark(function j(s,$){var S,A,F;return n()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return console.log("onFinishHandlerForm"),console.log("Received values of form: ",s),c.prev=2,F={image_url:$,title:s==null?void 0:s.title,description:s==null?void 0:s.description,author_id:1,tutors:(s==null||(S=s.tutors)===null||S===void 0?void 0:S.map(function(p){return p==null?void 0:p.tutor}))||[],users:(s==null||(A=s.users)===null||A===void 0?void 0:A.map(function(p){return p==null?void 0:p.user}))||[]},c.next=6,(0,f.request)("/api/categories",{method:"POST",data:F}).then(function(){var p=m()(n()().mark(function N(M){var b,U;return n()().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:(M==null||(b=M.data)===null||b===void 0?void 0:b.id)>0&&(h.ZP.success("Submitted successfully"),f.history.push("/admin-app/categories/edit/"+(M==null||(U=M.data)===null||U===void 0?void 0:U.id)));case 1:case"end":return z.stop()}},N)}));return function(N){return p.apply(this,arguments)}}()).catch(function(p){console.log(p)});case 6:return c.abrupt("return",c.sent);case 9:c.prev=9,c.t0=c.catch(2),console.log("api_response - error"),console.log(c.t0);case 13:return c.abrupt("return",!0);case 14:case"end":return c.stop()}},j,null,[[2,9]])}));return function(s,$){return X.apply(this,arguments)}}(),q=function(){var j=_.Z.useForm(),s=i()(j,1),$=s[0],S=(0,D.useState)("http://zia.project.localhost.com/images/default/placeholder.jpg"),A=i()(S,2),F=A[0],Y=A[1],c=(0,D.useState)([]),p=i()(c,2),N=p[0],M=p[1],b=(0,D.useState)([]),U=i()(b,2),k=U[0],z=U[1],ee={tutors:[{tutor:void 0}],users:[{user:void 0}]};return(0,D.useEffect)(function(){return(0,f.request)("/api/users",{params:{role:"tutor",page:1,per_page:1e3}}).then(function(P){var o=P.data.data.map(function(t,G){return{value:t==null?void 0:t.id,label:t==null?void 0:t.name}});return M(o),o})},[]),(0,D.useEffect)(function(){return(0,f.request)("/api/users",{params:{role:"user",page:1,per_page:1e3}}).then(function(P){var o=P.data.data.map(function(t,G){return{value:t==null?void 0:t.id,label:t==null?void 0:t.name}});return z(o),o})},[]),(0,r.jsx)(d._z,{children:(0,r.jsxs)(a.A,{onFinish:function(){var P=m()(n()().mark(function o(t){return n()().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return T.next=2,K(2e3);case 2:return T.next=4,Q(t,F);case 4:case"end":return T.stop()}},o)}));return function(o){return P.apply(this,arguments)}}(),layout:"vertical",grid:!0,initialValues:ee,form:$,submitter:{render:function(o,t){return(0,r.jsx)(E.S,{children:t})}},children:[(0,r.jsx)(C.Z,{title:"Category Details",bordered:!0,headerBordered:!0,collapsible:!0,size:"default",type:"inner",style:{marginBlockEnd:15,minWidth:800,maxWidth:"100%"},onCollapse:function(o){return console.log(o)},children:(0,r.jsxs)(I.Z,{gutter:{xs:8,sm:16,md:24,lg:32},children:[(0,r.jsx)(O.Z,{span:6,children:(0,r.jsxs)(a.A.Group,{size:24,children:[(0,r.jsx)(O.Z,{span:24,children:(0,r.jsx)(R.Z,{width:"100%",height:200,src:F})}),(0,r.jsx)(O.Z,{span:24,style:{textAlign:"center"},children:(0,r.jsx)(a.A.Item,{name:"image_url",getValueFromEvent:y.h,children:(0,r.jsx)(W.Z,{name:"file",onChange:function(o){if(console.log("file - onChange - info"),console.log(o),o.file.status!=="uploading"){if(o.file.status=="removed"&&Y(""),o.file.status==="done"){var t;Y(o==null||(t=o.file)===null||t===void 0||(t=t.response)===null||t===void 0?void 0:t.url)}o.file.status==="error"&&h.ZP.error("".concat(o.file.name," file upload failed."))}},maxCount:1,action:"/api/file-manager/upload",data:{directory:"categories"},onRemove:function(o){console.log("file is removed"),console.log(o),(0,f.request)("/api/file-manager/delete",{method:"DELETE",data:{filename:o==null?void 0:o.name,directory:"categories"}}).then(function(){var t=m()(n()().mark(function G(T){return n()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:console.log("api_response"),console.log(T);case 2:case"end":return w.stop()}},G)}));return function(G){return t.apply(this,arguments)}}())},children:(0,r.jsx)(L.ZP,{type:"primary",icon:(0,r.jsx)(Z.Z,{}),style:{margin:"10px 0px 0px 0px"},onClick:function(o){},children:"Change Image"})})})})]})}),(0,r.jsxs)(O.Z,{span:18,children:[(0,r.jsx)(a.A.Group,{size:24,children:(0,r.jsx)(B.Z,{name:"title",label:"Title",placeholder:"Type Category Title",rules:[{required:!0}],colProps:{xs:24,sm:24,md:24,lg:24,xl:24}})}),(0,r.jsx)(a.A.Group,{size:24,children:(0,r.jsx)(J.Z,{name:"description",label:"Description",fieldProps:{rows:6},placeholder:"Share a little description to fill out your category.",rules:[{required:!0}],colProps:{xs:24,sm:24,md:24,lg:24,xl:24}})})]})]})}),(0,r.jsx)(C.Z,{title:"Assign Tutors",bordered:!0,headerBordered:!0,collapsible:!0,size:"default",type:"inner",style:{marginBlockEnd:15,minWidth:800,maxWidth:"100%"},children:(0,r.jsx)(a.A.Group,{size:24,children:(0,r.jsx)(H.u,{name:"tutors",min:1,copyIconProps:{tooltipText:"Copy this tutor"},deleteIconProps:{tooltipText:"Delete this tutor"},creatorButtonProps:{creatorButtonText:"Add New Tutor"},children:(0,r.jsx)(a.A.Group,{size:24,children:(0,r.jsx)(x.Z,{name:"tutor",label:"Tutor",showSearch:!0,options:N,debounceTime:300,placeholder:"Please Select a Tutor",rules:[{required:!0}],colProps:{xs:24,sm:24,md:24,lg:24,xl:24}})})})})}),(0,r.jsx)(C.Z,{title:"Assign Users",bordered:!0,headerBordered:!0,collapsible:!0,size:"default",type:"inner",style:{marginBlockEnd:15,minWidth:800,maxWidth:"100%"},children:(0,r.jsx)(a.A.Group,{size:24,children:(0,r.jsx)(H.u,{name:"users",min:1,copyIconProps:{tooltipText:"Copy this user"},deleteIconProps:{tooltipText:"Delete this user"},creatorButtonProps:{creatorButtonText:"Add New User"},children:(0,r.jsx)(a.A.Group,{size:24,children:(0,r.jsx)(x.Z,{name:"user",label:"User",showSearch:!0,options:k,debounceTime:300,placeholder:"Please Select a User",rules:[{required:!0}],colProps:{xs:24,sm:24,md:24,lg:24,xl:24}})})})})})]})})};v.default=q}}]);
