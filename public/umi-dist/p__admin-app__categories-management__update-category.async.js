"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[4186],{51042:function(K,D,e){var s=e(1413),c=e(67294),C=e(42110),i=e(91146),d=function(u,O){return c.createElement(i.Z,(0,s.Z)((0,s.Z)({},u),{},{ref:O,icon:C.Z}))},n=c.forwardRef(d);D.Z=n},88484:function(K,D,e){e.d(D,{Z:function(){return u}});var s=e(1413),c=e(67294),C={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"},i=C,d=e(91146),n=function(h,S){return c.createElement(d.Z,(0,s.Z)((0,s.Z)({},h),{},{ref:S,icon:i}))},p=c.forwardRef(n),u=p},38345:function(K,D,e){var s=e(1413),c=e(53911),C=e(44962),i=e(13286),d=e(85893),n=function(O){return(0,d.jsx)(c.Z,(0,s.Z)({bodyStyle:{padding:0}},O))},p=c.Z;p.isProCard=!0,p.Divider=C.Z,p.TabPane=i.Z,p.Group=n,D.Z=p},64317:function(K,D,e){var s=e(1413),c=e(91),C=e(22270),i=e(67294),d=e(66758),n=e(57812),p=e(85893),u=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],O=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],h=function(m,U){var z=m.fieldProps,I=m.children,T=m.params,B=m.proFieldProps,G=m.mode,$=m.valueEnum,V=m.request,H=m.showSearch,j=m.options,M=(0,c.Z)(m,u),te=(0,i.useContext)(d.Z);return(0,p.jsx)(n.Z,(0,s.Z)((0,s.Z)({valueEnum:(0,C.h)($),request:V,params:T,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,s.Z)({options:j,mode:G,showSearch:H,getPopupContainer:te.getPopupContainer},z),ref:U,proFieldProps:B},M),{},{children:I}))},S=i.forwardRef(function(E,m){var U=E.fieldProps,z=E.children,I=E.params,T=E.proFieldProps,B=E.mode,G=E.valueEnum,$=E.request,V=E.options,H=(0,c.Z)(E,O),j=(0,s.Z)({options:V,mode:B||"multiple",labelInValue:!0,showSearch:!0,suffixIcon:null,autoClearSearchValue:!0,optionLabelProp:"label"},U),M=(0,i.useContext)(d.Z);return(0,p.jsx)(n.Z,(0,s.Z)((0,s.Z)({valueEnum:(0,C.h)(G),request:$,params:I,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,s.Z)({getPopupContainer:M.getPopupContainer},j),ref:m,proFieldProps:T},H),{},{children:z}))}),b=i.forwardRef(h),re=S,F=b;F.SearchSelect=re,F.displayName="ProFormComponent",D.Z=F},58547:function(K,D,e){e.d(D,{h:function(){return c}});var s=e(67294),c=function(d){return Array.isArray(d)?d:d&&d.fileList},C=function(d){return new Promise(function(n,p){var u=new FileReader;u.readAsDataURL(d.file.originFileObj),u.onload=function(){var O=u.result;n(O)},u.onerror=function(O){return p(O)}})}},11817:function(K,D,e){e.r(D);var s=e(97857),c=e.n(s),C=e(5574),i=e.n(C),d=e(15009),n=e.n(d),p=e(99289),u=e.n(p),O=e(6110),h=e(34994),S=e(2236),b=e(38345),re=e(5966),F=e(90672),E=e(5155),m=e(64317),U=e(2453),z=e(47019),I=e(71230),T=e(15746),B=e(83622),G=e(95715),$=e(66476),V=e(51042),H=e(88484),j=e(67294),M=e(76772),te=e(58547),t=e(85893),de=function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:100;return new Promise(function(a){setTimeout(function(){a(!0)},R)})},_e={image_url:"",title:"",description:"",tutors:"",users:""},pe=function(){var oe=u()(n()().mark(function R(a,k){var N,w,J;return n()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return console.log("onFinishHandlerForm"),console.log("Received values of form: ",a),v.prev=2,J={image_url:k,title:a==null?void 0:a.title,description:a==null?void 0:a.description,author_id:1,tutors:(a==null||(N=a.tutors)===null||N===void 0?void 0:N.map(function(P){return P==null?void 0:P.tutor}))||[],users:(a==null||(w=a.users)===null||w===void 0?void 0:w.map(function(P){return P==null?void 0:P.user}))||[]},v.next=6,(0,M.request)("/api/categories/"+(a==null?void 0:a.category_id),{method:"PUT",data:J}).then(function(){var P=u()(n()().mark(function Q(g){var x,X;return n()().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:(g==null||(x=g.data)===null||x===void 0?void 0:x.id)>0&&(U.ZP.success("Submitted successfully"),M.history.push("/admin-app/categories/edit/"+(g==null||(X=g.data)===null||X===void 0?void 0:X.id)));case 1:case"end":return Y.stop()}},Q)}));return function(Q){return P.apply(this,arguments)}}()).catch(function(P){console.log(P)});case 6:return v.abrupt("return",v.sent);case 9:v.prev=9,v.t0=v.catch(2),console.log("api_response - error"),console.log(v.t0);case 13:return v.abrupt("return",!0);case 14:case"end":return v.stop()}},R,null,[[2,9]])}));return function(a,k){return oe.apply(this,arguments)}}(),me=function(){var R=(0,M.useParams)(),a=z.Z.useForm(),k=i()(a,1),N=k[0],w=(0,j.useState)(0),J=i()(w,2),ne=J[0],v=J[1],P=(0,j.useState)("http://zia.project.localhost.com/images/default/placeholder.jpg"),Q=i()(P,2),g=Q[0],x=Q[1],X=(0,j.useState)([]),ae=i()(X,2),Y=ae[0],ve=ae[1],he=(0,j.useState)([]),ce=i()(he,2),Ee=ce[0],Pe=ce[1];return(0,j.useEffect)(function(){v(R.id)},[]),(0,j.useEffect)(function(){return(0,M.request)("/api/users",{params:{role:"tutor",page:1,per_page:1e3}}).then(function(f){var r=f.data.data.map(function(o,W){return{value:o==null?void 0:o.id,label:o==null?void 0:o.name}});return ve(r),r})},[]),(0,j.useEffect)(function(){return(0,M.request)("/api/users",{params:{role:"user",page:1,per_page:1e3}}).then(function(f){var r=f.data.data.map(function(o,W){return{value:o==null?void 0:o.id,label:o==null?void 0:o.name}});return Pe(r),r})},[]),(0,t.jsxs)(O._z,{children:[(0,t.jsxs)(I.Z,{gutter:{xs:8,sm:16,md:24,lg:32},children:[(0,t.jsx)(T.Z,{flex:"auto"}),(0,t.jsx)(T.Z,{flex:"100px",children:(0,t.jsxs)(B.ZP,{type:"primary",onClick:function(){M.history.push("/admin-app/categories/new")},style:{marginBlockEnd:15},children:[(0,t.jsx)(V.Z,{})," New"]},"new")})]}),(0,t.jsxs)(h.A,{layout:"vertical",grid:!0,initialValues:_e,form:N,params:{category_id:ne},request:u()(n()().mark(function f(){var r,o=arguments;return n()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:if(r=o.length>0&&o[0]!==void 0?o[0]:{},console.log("proform-params"),console.log(r),(r==null?void 0:r.category_id)!=0){_.next=5;break}return _.abrupt("return");case 5:return _.next=7,de(2e3);case 7:return _.next=9,(0,M.request)("/api/categories/"+(r==null?void 0:r.category_id),{method:"GET"}).then(function(){var q=u()(n()().mark(function y(l){var le,se,ie,ue,L,Z;return n()().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:return console.log("api_response"),console.log(l),x(l==null||(le=l.data)===null||le===void 0?void 0:le.image_url),ee.abrupt("return",c()(c()({},_e),{},{image_url:l==null||(se=l.data)===null||se===void 0?void 0:se.image_url,title:l==null||(ie=l.data)===null||ie===void 0?void 0:ie.title,description:l==null||(ue=l.data)===null||ue===void 0?void 0:ue.description,tutors:(l==null||(L=l.data)===null||L===void 0||(L=L.tutors)===null||L===void 0?void 0:L.map(function(A){return{tutor:A==null?void 0:A.id}}))||[],users:(l==null||(Z=l.data)===null||Z===void 0||(Z=Z.users)===null||Z===void 0?void 0:Z.map(function(A){return{user:A==null?void 0:A.id}}))||[]}));case 4:case"end":return ee.stop()}},y)}));return function(y){return q.apply(this,arguments)}}()).catch(function(q){console.log(q)});case 9:return _.abrupt("return",_.sent);case 10:case"end":return _.stop()}},f)})),onFinish:function(){var f=u()(n()().mark(function r(o){return n()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.next=2,de(2e3);case 2:return o.category_id=ne,o.image_url=g,_.next=6,pe(o,g);case 6:case"end":return _.stop()}},r)}));return function(r){return f.apply(this,arguments)}}(),submitter:{render:function(r,o){return(0,t.jsx)(S.S,{children:o})}},children:[(0,t.jsx)(b.Z,{title:"Category Details",bordered:!0,headerBordered:!0,collapsible:!0,size:"default",type:"inner",style:{marginBlockEnd:15,minWidth:800,maxWidth:"100%"},onCollapse:function(r){return console.log(r)},children:(0,t.jsxs)(I.Z,{gutter:{xs:8,sm:16,md:24,lg:32},children:[(0,t.jsx)(T.Z,{span:6,children:(0,t.jsxs)(h.A.Group,{size:24,children:[(0,t.jsx)(T.Z,{span:24,children:(0,t.jsx)(G.Z,{width:"100%",height:200,src:g,fallback:g!==""||g===null?g:"http://zia.project.localhost.com/images/default/placeholder.jpg"})}),(0,t.jsx)(T.Z,{span:24,style:{textAlign:"center"},children:(0,t.jsx)(h.A.Item,{name:"image_url",getValueFromEvent:te.h,children:(0,t.jsx)($.Z,{name:"file",onChange:function(r){if(console.log("file - onChange - info"),console.log(r),r.file.status!=="uploading"){if(r.file.status=="removed"&&x(""),r.file.status==="done"){var o;x(r==null||(o=r.file)===null||o===void 0||(o=o.response)===null||o===void 0?void 0:o.url)}r.file.status==="error"&&U.ZP.error("".concat(r.file.name," file upload failed."))}},maxCount:1,action:"/api/file-manager/upload",data:{directory:"categories"},onRemove:function(r){console.log("file is removed"),console.log(r),(0,M.request)("/api/file-manager/delete",{method:"DELETE",data:{filename:r==null?void 0:r.name,directory:"categories"}}).then(function(){var o=u()(n()().mark(function W(_){return n()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:console.log("api_response"),console.log(_);case 2:case"end":return y.stop()}},W)}));return function(W){return o.apply(this,arguments)}}())},children:(0,t.jsx)(B.ZP,{type:"primary",icon:(0,t.jsx)(H.Z,{}),style:{margin:"10px 0px 0px 0px"},onClick:function(r){},children:"Change Image"})})})})]})}),(0,t.jsxs)(T.Z,{span:18,children:[(0,t.jsx)(h.A.Group,{size:24,children:(0,t.jsx)(re.Z,{name:"title",label:"Title",placeholder:"Type Category Title",rules:[{required:!0}],colProps:{xs:24,sm:24,md:24,lg:24,xl:24}})}),(0,t.jsx)(h.A.Group,{size:24,children:(0,t.jsx)(F.Z,{name:"description",label:"Description",fieldProps:{rows:6},placeholder:"Share a little description to fill out your category.",rules:[{required:!0}],colProps:{xs:24,sm:24,md:24,lg:24,xl:24}})})]})]})}),(0,t.jsx)(b.Z,{title:"Assign Tutors",bordered:!0,headerBordered:!0,collapsible:!0,size:"default",type:"inner",style:{marginBlockEnd:15,minWidth:800,maxWidth:"100%"},children:(0,t.jsx)(h.A.Group,{size:24,children:(0,t.jsx)(E.u,{name:"tutors",min:1,copyIconProps:{tooltipText:"Copy this tutor"},deleteIconProps:{tooltipText:"Delete this tutor"},creatorButtonProps:{creatorButtonText:"Add New Tutor"},children:(0,t.jsx)(h.A.Group,{size:24,children:(0,t.jsx)(m.Z,{name:"tutor",label:"Tutor",showSearch:!0,options:Y,debounceTime:300,placeholder:"Please Select a Tutor",rules:[{required:!0}],colProps:{xs:24,sm:24,md:24,lg:24,xl:24}})})})})}),(0,t.jsx)(b.Z,{title:"Assign Users",bordered:!0,headerBordered:!0,collapsible:!0,size:"default",type:"inner",style:{marginBlockEnd:15,minWidth:800,maxWidth:"100%"},children:(0,t.jsx)(h.A.Group,{size:24,children:(0,t.jsx)(E.u,{name:"users",min:1,copyIconProps:{tooltipText:"Copy this user"},deleteIconProps:{tooltipText:"Delete this user"},creatorButtonProps:{creatorButtonText:"Add New User"},children:(0,t.jsx)(h.A.Group,{size:24,children:(0,t.jsx)(m.Z,{name:"user",label:"User",showSearch:!0,options:Ee,debounceTime:300,placeholder:"Please Select a User",rules:[{required:!0}],colProps:{xs:24,sm:24,md:24,lg:24,xl:24}})})})})})]})]})};D.default=me}}]);
