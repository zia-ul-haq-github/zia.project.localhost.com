"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[534],{51042:function(V,O,e){var d=e(1413),P=e(67294),c=e(42110),p=e(91146),u=function(_,D){return P.createElement(p.Z,(0,d.Z)((0,d.Z)({},_),{},{ref:D,icon:c.Z}))},a=P.forwardRef(u);O.Z=a},50335:function(V,O,e){e.d(O,{Z:function(){return r}});var d=e(1413),P=e(91),c=e(67294),p=e(66758),u=e(68256),a=e(85893),b=["proFieldProps","fieldProps"],_="date",D=c.forwardRef(function(l,h){var g=l.proFieldProps,E=l.fieldProps,f=(0,P.Z)(l,b),v=(0,c.useContext)(p.Z);return(0,a.jsx)(u.Z,(0,d.Z)({ref:h,valueType:_,fieldProps:(0,d.Z)({getPopupContainer:v.getPopupContainer},E),proFieldProps:g,filedConfig:{valueType:_,customLightMode:!0}},f))}),C=D,w=["proFieldProps","fieldProps"],z="dateMonth",B=c.forwardRef(function(l,h){var g=l.proFieldProps,E=l.fieldProps,f=(0,P.Z)(l,w),v=(0,c.useContext)(p.Z);return(0,a.jsx)(u.Z,(0,d.Z)({ref:h,valueType:z,fieldProps:(0,d.Z)({getPopupContainer:v.getPopupContainer},E),proFieldProps:g,filedConfig:{valueType:z,customLightMode:!0}},f))}),J=B,X=["fieldProps"],F="dateQuarter",q=c.forwardRef(function(l,h){var g=l.fieldProps,E=(0,P.Z)(l,X),f=(0,c.useContext)(p.Z);return(0,a.jsx)(u.Z,(0,d.Z)({ref:h,valueType:F,fieldProps:(0,d.Z)({getPopupContainer:f.getPopupContainer},g),filedConfig:{valueType:F,customLightMode:!0}},E))}),$=q,j=["proFieldProps","fieldProps"],L="dateWeek",ee=c.forwardRef(function(l,h){var g=l.proFieldProps,E=l.fieldProps,f=(0,P.Z)(l,j),v=(0,c.useContext)(p.Z);return(0,a.jsx)(u.Z,(0,d.Z)({ref:h,valueType:L,fieldProps:(0,d.Z)({getPopupContainer:v.getPopupContainer},E),proFieldProps:g,filedConfig:{valueType:L,customLightMode:!0}},f))}),re=ee,oe=["proFieldProps","fieldProps"],k="dateYear",y=c.forwardRef(function(l,h){var g=l.proFieldProps,E=l.fieldProps,f=(0,P.Z)(l,oe),v=(0,c.useContext)(p.Z);return(0,a.jsx)(u.Z,(0,d.Z)({ref:h,valueType:k,fieldProps:(0,d.Z)({getPopupContainer:v.getPopupContainer},E),proFieldProps:g,filedConfig:{valueType:k,customLightMode:!0}},f))}),T=y,Z=C;Z.Week=re,Z.Month=J,Z.Quarter=$,Z.Year=T,Z.displayName="ProFormComponent";var r=Z},58547:function(V,O,e){e.d(O,{h:function(){return P}});var d=e(67294),P=function(u){return Array.isArray(u)?u:u&&u.fileList},c=function(u){return new Promise(function(a,b){var _=new FileReader;_.readAsDataURL(u.file.originFileObj),_.onload=function(){var D=_.result;a(D)},_.onerror=function(D){return b(D)}})}},84381:function(V,O,e){e.r(O);var d=e(97857),P=e.n(d),c=e(5574),p=e.n(c),u=e(15009),a=e.n(u),b=e(99289),_=e.n(b),D=e(6110),C=e(34994),w=e(2236),z=e(38345),B=e(5966),J=e(50335),X=e(90672),F=e(2453),q=e(8232),$=e(71230),j=e(15746),L=e(83622),ee=e(95715),re=e(66476),oe=e(51042),k=e(88484),y=e(67294),T=e(76772),Z=e(58547),r=e(85893),l=function(){var v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:100;return new Promise(function(R){setTimeout(function(){R(!0)},v)})},h={image_url:"",name:"",email:"",date_of_birth:"",mobile_no:"",bio_data:""},g=function(){var f=_()(a()().mark(function v(R,n){var Y;return a()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return console.log("onFinishHandlerForm"),console.log("Received values of form: ",n),m.prev=2,Y={image_url:R,name:n==null?void 0:n.name,email:n==null?void 0:n.email,date_of_birth:n==null?void 0:n.date_of_birth,mobile_no:n==null?void 0:n.mobile_no,bio_data:n==null?void 0:n.bio_data},m.next=6,(0,T.request)("/api/users/"+(n==null?void 0:n.user_id),{method:"PUT",data:Y}).then(function(){var A=_()(a()().mark(function G(M){var I,K;return a()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:console.log("api_response"),console.log(M),(M==null||(I=M.data)===null||I===void 0?void 0:I.id)>0&&(F.ZP.success("Submitted successfully"),T.history.push("/admin-app/users/edit/"+(M==null||(K=M.data)===null||K===void 0?void 0:K.id)));case 3:case"end":return S.stop()}},G)}));return function(G){return A.apply(this,arguments)}}()).catch(function(A){console.log(A)});case 6:return m.abrupt("return",m.sent);case 9:m.prev=9,m.t0=m.catch(2),console.log("api_response - error"),console.log(m.t0);case 13:return m.abrupt("return",!0);case 14:case"end":return m.stop()}},v,null,[[2,9]])}));return function(R,n){return f.apply(this,arguments)}}(),E=function(){var v=(0,T.useParams)(),R=q.Z.useForm(),n=p()(R,1),Y=n[0],ue=(0,y.useState)(0),m=p()(ue,2),A=m[0],G=m[1],M=(0,y.useState)(""),I=p()(M,2),K=I[0],_e=I[1],S=(0,y.useState)(K),ce=p()(S,2),U=ce[0],me=ce[1];return(0,y.useEffect)(function(){G(v.id)},[]),(0,r.jsxs)(D._z,{children:[(0,r.jsxs)($.Z,{gutter:{xs:8,sm:16,md:24,lg:32},children:[(0,r.jsx)(j.Z,{flex:"auto"}),(0,r.jsx)(j.Z,{flex:"100px",children:(0,r.jsxs)(L.ZP,{type:"primary",onClick:function(){T.history.push("/admin-app/users/new")},style:{marginBlockEnd:15},children:[(0,r.jsx)(oe.Z,{})," New"]},"new")})]}),(0,r.jsx)(C.A,{layout:"vertical",grid:!0,form:Y,initialValues:h,params:{user_id:A},request:_()(a()().mark(function x(){var o,s=arguments;return a()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(o=s.length>0&&s[0]!==void 0?s[0]:{},console.log("proform-params"),console.log(o),(o==null?void 0:o.user_id)!=0){i.next=5;break}return i.abrupt("return");case 5:return i.next=7,l(2e3);case 7:return i.next=9,(0,T.request)("/api/users/"+(o==null?void 0:o.user_id),{method:"GET"}).then(function(){var Q=_()(a()().mark(function W(t){var ae,ne,te,le,se,ie,de;return a()().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return console.log("api_response"),console.log(t),_e(t==null||(ae=t.data)===null||ae===void 0?void 0:ae.image_url),H.abrupt("return",P()(P()({},h),{},{image_url:t==null||(ne=t.data)===null||ne===void 0?void 0:ne.image_url,name:t==null||(te=t.data)===null||te===void 0?void 0:te.name,email:t==null||(le=t.data)===null||le===void 0?void 0:le.email,date_of_birth:t==null||(se=t.data)===null||se===void 0?void 0:se.date_of_birth,mobile_no:t==null||(ie=t.data)===null||ie===void 0?void 0:ie.mobile_no,bio_data:t==null||(de=t.data)===null||de===void 0?void 0:de.bio_data}));case 4:case"end":return H.stop()}},W)}));return function(W){return Q.apply(this,arguments)}}()).catch(function(Q){console.log(Q)});case 9:return i.abrupt("return",i.sent);case 10:case"end":return i.stop()}},x)})),onFinish:function(){var x=_()(a()().mark(function o(s){return a()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return console.log(s),i.next=3,l(1e3);case 3:return s.user_id=A,s.image_url=U,i.next=7,g(U,s);case 7:case"end":return i.stop()}},o)}));return function(o){return x.apply(this,arguments)}}(),formProps:{validateMessages:{required:"This is required"}},submitter:{render:function(o,s){return(0,r.jsx)(w.S,{children:s})}},children:(0,r.jsx)(z.Z,{title:"BIO Details",bordered:!0,headerBordered:!0,collapsible:!0,size:"default",type:"inner",style:{marginBlockEnd:15,minWidth:800,maxWidth:"100%"},onCollapse:function(o){return console.log(o)},children:(0,r.jsxs)($.Z,{gutter:{xs:8,sm:16,md:24,lg:32},children:[(0,r.jsx)(j.Z,{span:6,children:(0,r.jsxs)(C.A.Group,{size:24,children:[(0,r.jsx)(j.Z,{span:24,children:(0,r.jsx)(ee.Z,{width:"100%",height:200,src:U,fallback:U!==""||U===null?U:"http://zia.project.localhost.com/images/default/user-profile-image.png"})}),(0,r.jsx)(j.Z,{span:24,style:{textAlign:"center"},children:(0,r.jsx)(C.A.Item,{name:"image_url",getValueFromEvent:Z.h,children:(0,r.jsx)(re.Z,{name:"file",onChange:function(o){if(console.log("file - onChange - info"),console.log(o),o.file.status!=="uploading"){if(o.file.status=="removed"&&me(""),o.file.status==="done"){var s;me(o==null||(s=o.file)===null||s===void 0||(s=s.response)===null||s===void 0?void 0:s.url)}o.file.status==="error"&&F.ZP.error("".concat(o.file.name," file upload failed."))}},maxCount:1,action:"/api/file-manager/upload",data:{directory:"users"},onRemove:function(o){console.log("file is removed"),console.log(o),(0,T.request)("/api/file-manager/delete",{method:"DELETE",data:{filename:o==null?void 0:o.name,directory:"users"}}).then(function(){var s=_()(a()().mark(function N(i){return a()().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:console.log("api_response"),console.log(i);case 2:case"end":return W.stop()}},N)}));return function(N){return s.apply(this,arguments)}}())},children:(0,r.jsx)(L.ZP,{type:"primary",icon:(0,r.jsx)(k.Z,{}),style:{margin:"10px 0px 0px 0px"},onClick:function(o){},children:"Change Image"})})})})]})}),(0,r.jsxs)(j.Z,{span:18,children:[(0,r.jsxs)(C.A.Group,{size:24,children:[(0,r.jsx)(B.Z,{name:"name",label:"Name",placeholder:"Type Your Name",colProps:{xs:24,sm:24,md:12,lg:12,xl:12}}),(0,r.jsx)(B.Z,{label:"Email",name:"email",placeholder:"info@example.com etc.",rules:[{required:!0}],disabled:!0,colProps:{xs:24,sm:24,md:12,lg:12,xl:12}})]}),(0,r.jsxs)(C.A.Group,{size:24,children:[(0,r.jsx)(J.Z,{label:"Date of Birth",name:"date_of_birth",colProps:{xs:24,sm:24,md:12,lg:12,xl:12}}),(0,r.jsx)(B.Z,{name:"mobile_no",label:"Mobile No",placeholder:"Type Your Mobile No",colProps:{xs:24,sm:24,md:12,lg:12,xl:12}})]}),(0,r.jsx)(C.A.Group,{size:24,children:(0,r.jsx)(X.Z,{name:"bio_data",label:"Biographical Info",fieldProps:{rows:6},placeholder:"Share a little biographical information to fill out your profile. This may be shown publicly. ",colProps:{xs:24,sm:24,md:24,lg:24,xl:24}})})]})]})})})]})};O.default=E}}]);
