"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[524],{82061:function(T,c,e){var l=e(1413),r=e(67294),v=e(47046),t=e(91146),h=function(P,E){return r.createElement(t.Z,(0,l.Z)((0,l.Z)({},P),{},{ref:E,icon:v.Z}))},s=r.forwardRef(h);c.Z=s},47389:function(T,c,e){var l=e(1413),r=e(67294),v=e(27363),t=e(91146),h=function(P,E){return r.createElement(t.Z,(0,l.Z)((0,l.Z)({},P),{},{ref:E,icon:v.Z}))},s=r.forwardRef(h);c.Z=s},51042:function(T,c,e){var l=e(1413),r=e(67294),v=e(42110),t=e(91146),h=function(P,E){return r.createElement(t.Z,(0,l.Z)((0,l.Z)({},P),{},{ref:E,icon:v.Z}))},s=r.forwardRef(h);c.Z=s},38345:function(T,c,e){var l=e(1413),r=e(53911),v=e(44962),t=e(13286),h=e(85893),s=function(E){return(0,h.jsx)(r.Z,(0,l.Z)({bodyStyle:{padding:0}},E))},f=r.Z;f.isProCard=!0,f.Divider=v.Z,f.TabPane=t.Z,f.Group=s,c.Z=f},27956:function(T,c,e){e.r(c),e.d(c,{default:function(){return Q},waitTime:function(){return L},waitTimePromise:function(){return S}});var l=e(97857),r=e.n(l),v=e(15009),t=e.n(v),h=e(99289),s=e.n(h),f=e(47389),P=e(51042),E=e(6110),K=e(91319),W=e(68997),y=e(83622),U=e(2453),I=e(76772),Y=e(27484),A=e.n(Y),w=e(67294),F=e(86738),z=e(63783),G=e(82061),a=e(85893),N=function(i){var p=i.rowId,u=i.onFinish;return(0,a.jsx)(F.Z,{title:"Delete the User",description:"Are you sure you want to delete this user?",icon:(0,a.jsx)(z.Z,{style:{color:"red"}}),placement:"left",onConfirm:s()(t()().mark(function C(){return t()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,(0,I.request)("/api/users/"+p,{method:"DELETE"}).then(function(R){R.status===!0?u({status:!0,text_message:"User deleted successfully"}):u({status:!1,text_message:"Failed to delete User: Invalid response"})});case 2:return d.abrupt("return",d.sent);case 3:case"end":return d.stop()}},C)})),okText:"Yes",cancelText:"No",children:(0,a.jsx)(y.ZP,{danger:!0,children:(0,a.jsx)(G.Z,{})},"deletable")})},$=N,S=function(){var M=s()(t()().mark(function i(){var p,u=arguments;return t()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return p=u.length>0&&u[0]!==void 0?u[0]:100,o.abrupt("return",new Promise(function(d){setTimeout(function(){d(!0)},p)}));case 2:case"end":return o.stop()}},i)}));return function(){return M.apply(this,arguments)}}(),L=function(){var M=s()(t()().mark(function i(){var p,u=arguments;return t()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return p=u.length>0&&u[0]!==void 0?u[0]:100,o.next=3,S(p);case 3:case"end":return o.stop()}},i)}));return function(){return M.apply(this,arguments)}}(),b=function(){var i=(0,I.useModel)("@@initialState"),p=i.initialState,u=i.loading,C=i.refresh,o=i.setInitialState;console.log("initialState"),console.log(p),console.log("loading"),console.log(u);var d=(0,w.useRef)(),R=[{title:"ID",dataIndex:"id",key:"table-column-id",hideInSearch:!0,sorter:!0,defaultSortOrder:"descend"},{title:"Name",key:"table-column-name",copyable:!0,hideInSearch:!0,render:function(D,n){return(0,a.jsxs)("div",{children:[(0,a.jsx)(W.Z,{size:"large",src:(n==null?void 0:n.image_url)!==null?n==null?void 0:n.image_url:"http://zia.project.localhost.com/images/default/user-profile-image.png"}),(0,a.jsx)("span",{style:{margin:"0px 0px 0px 10px"},children:n==null?void 0:n.name})]})}},{title:"Email",dataIndex:"email",key:"table-column-email",hideInSearch:!0},{title:"Created Date",dataIndex:"created_at",key:"table-column-created-date",sorter:!0,hideInForm:!0,hideInSearch:!0,render:function(D){return(0,a.jsx)("p",{children:A()(new Date(D)).format("DD-MM-YYYY")})}},{title:"Updated Date",dataIndex:"updated_at",key:"table-column-updated-date",sorter:!0,hideInForm:!0,hideInSearch:!0,render:function(D){return(0,a.jsx)("p",{children:A()(new Date(D)).format("DD-MM-YYYY")})}},{title:"Actions",valueType:"option",key:"table-column-actions",render:function(D,n,x,H){return[(0,a.jsx)(y.ZP,{onClick:function(){I.history.push("/admin-app/users/edit/"+n.id)},children:(0,a.jsx)(f.Z,{})},"editable"),(0,a.jsx)($,{rowId:n==null?void 0:n.id,onFinish:function(m){var _=m.status,Z=m.text_message;if(_){var g;U.ZP.success(Z),(g=d.current)===null||g===void 0||g.reload()}else U.ZP.error(Z)}})]}}];return(0,a.jsx)(E._z,{children:(0,a.jsx)(K.Z,{actionRef:d,rowKey:"id",search:!1,pagination:{defaultPageSize:10,showSizeChanger:!0,pageSizeOptions:[10,20,50,100]},toolBarRender:function(){return[(0,a.jsxs)(y.ZP,{type:"primary",onClick:function(){I.history.push("/admin-app/users/new")},children:[(0,a.jsx)(P.Z,{})," New"]},"new")]},request:function(){var O=s()(t()().mark(function D(n,x,H){return t()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,L(2e3);case 2:return m.next=4,(0,I.request)("/api/users",{params:{sort:r()({},x),pagination:r()({},n),role:"user"}}).then(function(){var _=s()(t()().mark(function Z(g){return t()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.abrupt("return",{data:g.data.data,total:g.data.total,current_page:g.data.current_page});case 1:case"end":return j.stop()}},Z)}));return function(Z){return _.apply(this,arguments)}}()).catch(function(_){console.log(_)});case 4:return m.abrupt("return",m.sent);case 5:case"end":return m.stop()}},D)}));return function(D,n,x){return O.apply(this,arguments)}}(),columns:R})})},Q=b}}]);
