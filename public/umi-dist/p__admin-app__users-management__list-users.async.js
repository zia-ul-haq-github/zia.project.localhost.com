"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[6524],{82061:function(C,c,e){var s=e(1413),r=e(67294),m=e(47046),t=e(91146),v=function(h,E){return r.createElement(t.Z,(0,s.Z)((0,s.Z)({},h),{},{ref:E,icon:m.Z}))},i=r.forwardRef(v);c.Z=i},47389:function(C,c,e){var s=e(1413),r=e(67294),m=e(27363),t=e(91146),v=function(h,E){return r.createElement(t.Z,(0,s.Z)((0,s.Z)({},h),{},{ref:E,icon:m.Z}))},i=r.forwardRef(v);c.Z=i},51042:function(C,c,e){var s=e(1413),r=e(67294),m=e(42110),t=e(91146),v=function(h,E){return r.createElement(t.Z,(0,s.Z)((0,s.Z)({},h),{},{ref:E,icon:m.Z}))},i=r.forwardRef(v);c.Z=i},63783:function(C,c,e){var s=e(1413),r=e(67294),m=e(36688),t=e(91146),v=function(h,E){return r.createElement(t.Z,(0,s.Z)((0,s.Z)({},h),{},{ref:E,icon:m.Z}))},i=r.forwardRef(v);c.Z=i},27956:function(C,c,e){e.r(c),e.d(c,{default:function(){return b},waitTime:function(){return L},waitTimePromise:function(){return S}});var s=e(97857),r=e.n(s),m=e(15009),t=e.n(m),v=e(99289),i=e.n(v),P=e(47389),h=e(51042),E=e(6110),K=e(91319),W=e(68997),j=e(83622),U=e(2453),I=e(76772),w=e(27484),A=e.n(w),Y=e(67294),F=e(86738),z=e(63783),Q=e(82061),a=e(85893),N=function(l){var p=l.rowId,u=l.onFinish;return(0,a.jsx)(F.Z,{title:"Delete the User",description:"Are you sure you want to delete this user?",icon:(0,a.jsx)(z.Z,{style:{color:"red"}}),placement:"left",onConfirm:i()(t()().mark(function R(){return t()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,(0,I.request)("/api/users/"+p,{method:"DELETE"}).then(function(y){y.status===!0?u({status:!0,text_message:"User deleted successfully"}):u({status:!1,text_message:"Failed to delete User: Invalid response"})});case 2:return d.abrupt("return",d.sent);case 3:case"end":return d.stop()}},R)})),okText:"Yes",cancelText:"No",children:(0,a.jsx)(j.ZP,{danger:!0,children:(0,a.jsx)(Q.Z,{})},"deletable")})},$=N,S=function(){var M=i()(t()().mark(function l(){var p,u=arguments;return t()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return p=u.length>0&&u[0]!==void 0?u[0]:100,o.abrupt("return",new Promise(function(d){setTimeout(function(){d(!0)},p)}));case 2:case"end":return o.stop()}},l)}));return function(){return M.apply(this,arguments)}}(),L=function(){var M=i()(t()().mark(function l(){var p,u=arguments;return t()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return p=u.length>0&&u[0]!==void 0?u[0]:100,o.next=3,S(p);case 3:case"end":return o.stop()}},l)}));return function(){return M.apply(this,arguments)}}(),G=function(){var l=(0,I.useModel)("@@initialState"),p=l.initialState,u=l.loading,R=l.refresh,o=l.setInitialState;console.log("initialState"),console.log(p),console.log("loading"),console.log(u);var d=(0,Y.useRef)(),y=[{title:"ID",dataIndex:"id",key:"table-column-id",hideInSearch:!0,sorter:!0,defaultSortOrder:"descend"},{title:"Name",key:"table-column-name",copyable:!0,hideInSearch:!0,render:function(g,n){return(0,a.jsxs)("div",{children:[(0,a.jsx)(W.Z,{size:"large",src:(n==null?void 0:n.image_url)!==null?n==null?void 0:n.image_url:"http://zia.project.localhost.com/images/default/user-profile-image.png"}),(0,a.jsx)("span",{style:{margin:"0px 0px 0px 10px"},children:n==null?void 0:n.name})]})}},{title:"Email",dataIndex:"email",key:"table-column-email",hideInSearch:!0},{title:"Created Date",dataIndex:"created_at",key:"table-column-created-date",sorter:!0,hideInForm:!0,hideInSearch:!0,render:function(g){return(0,a.jsx)("p",{children:A()(new Date(g)).format("DD-MM-YYYY")})}},{title:"Updated Date",dataIndex:"updated_at",key:"table-column-updated-date",sorter:!0,hideInForm:!0,hideInSearch:!0,render:function(g){return(0,a.jsx)("p",{children:A()(new Date(g)).format("DD-MM-YYYY")})}},{title:"Actions",valueType:"option",key:"table-column-actions",render:function(g,n,x,H){return[(0,a.jsx)(j.ZP,{onClick:function(){I.history.push("/admin-app/users/edit/"+n.id)},children:(0,a.jsx)(P.Z,{})},"editable"),(0,a.jsx)($,{rowId:n==null?void 0:n.id,onFinish:function(f){var _=f.status,Z=f.text_message;if(_){var O;U.ZP.success(Z),(O=d.current)===null||O===void 0||O.reload()}else U.ZP.error(Z)}})]}}];return(0,a.jsx)(E._z,{children:(0,a.jsx)(K.Z,{actionRef:d,rowKey:"id",search:!1,options:!1,pagination:{defaultPageSize:10,showSizeChanger:!0,pageSizeOptions:[10,20,50,100]},toolBarRender:function(){return[(0,a.jsxs)(j.ZP,{type:"primary",onClick:function(){I.history.push("/admin-app/users/new")},children:[(0,a.jsx)(h.Z,{})," New"]},"new")]},request:function(){var D=i()(t()().mark(function g(n,x,H){return t()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,L(2e3);case 2:return f.next=4,(0,I.request)("/api/users",{params:{sort:r()({},x),pagination:r()({},n),role:"user"}}).then(function(){var _=i()(t()().mark(function Z(O){return t()().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return T.abrupt("return",{data:O.data.data,total:O.data.total,current_page:O.data.current_page});case 1:case"end":return T.stop()}},Z)}));return function(Z){return _.apply(this,arguments)}}()).catch(function(_){console.log(_)});case 4:return f.abrupt("return",f.sent);case 5:case"end":return f.stop()}},g)}));return function(g,n,x){return D.apply(this,arguments)}}(),columns:y})})},b=G}}]);
